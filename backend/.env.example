# ===== JanSathi AI Backend — Environment Variables =====
# Copy this file to .env and fill in your real values.
# NEVER commit .env — it is excluded by .gitignore.

# ── LLM Provider (Required) ─────────────────────────────────
GROQ_API_KEY=gsk_your_key_here
LLM_PROVIDER=groq
LLM_MODEL=llama-3.3-70b-versatile
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=500
LLM_TOP_P=0.9
LLM_INTENT_TEMPERATURE=0.1
LLM_INTENT_MAX_TOKENS=100

# ── Database (Required) ─────────────────────────────────────
DATABASE_URL="postgresql://user:password@host:6543/dbname?pgbouncer=true"
DIRECT_URL="postgresql://user:password@host:5432/dbname"

# ── CORS ─────────────────────────────────────────────────────
ALLOWED_ORIGINS=http://localhost:3000

# ── Server ───────────────────────────────────────────────────
PORT=4000
NODE_ENV=development
LOG_LEVEL=info

# ── Rate Limiter ─────────────────────────────────────────────
RATE_LIMITER=memory
# REDIS_URL=redis://localhost:6379
# REDIS_PREFIX=jansathi
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=30

# ── Auth / Sessions ─────────────────────────────────────────
SESSION_COOKIE_NAME=jansathi_sid
SESSION_MAX_AGE_SECONDS=2592000
SESSION_TOKEN_BYTES=32

# ── OTP ──────────────────────────────────────────────────────
OTP_CODE_LENGTH=6
OTP_EXPIRY_SECONDS=300
OTP_MAX_ATTEMPTS=5
OTP_RATE_LIMIT=3
OTP_RATE_LIMIT_WINDOW=600

# ── RAG / Retrieval ─────────────────────────────────────────
ENABLE_RAG=false
RAG_TOP_K=5
RAG_MAX_TOKEN_BUDGET=1500
RAG_SCORE_THRESHOLD=0.3

# ── Embedding Provider ──────────────────────────────────────
# EMBEDDING_API_KEY=sk-your-openai-key
# EMBEDDING_MODEL=text-embedding-3-small
# EMBEDDING_DIMENSIONS=1536
# EMBEDDING_BASE_URL=https://api.openai.com/v1

# ── Embedding Cache ─────────────────────────────────────────
ENABLE_EMBEDDING_CACHE=false
EMBEDDING_CACHE_TTL_MS=600000
EMBEDDING_CACHE_MAX_SIZE=500

# ── Conversation Memory ─────────────────────────────────────
ENABLE_CONVERSATION_MEMORY=false
MEMORY_MAX_ITEMS_PER_USER=1000
MEMORY_PRUNE_DAYS=60
MEMORY_PROTECTED_RECENT=20

# ── Memory Summarizer ───────────────────────────────────────
ENABLE_MEMORY_SUMMARIZER=false
MEMORY_SUMMARIZE_THRESHOLD=100
MEMORY_SUMMARIZE_BATCH=30

# ── Reranker ─────────────────────────────────────────────────
ENABLE_RERANKER=false
# RERANKER_API_URL=https://api.cohere.ai/v1/rerank
# RERANKER_API_KEY=your-key-here
RERANKER_TOP_N=3

# ── Tokenizer ───────────────────────────────────────────────
USE_STRICT_TOKENIZER=false

# ── Observability ───────────────────────────────────────────
PROMPT_LOG_MODE=hash
